[
  {
    "objectID": "BaseR.html",
    "href": "BaseR.html",
    "title": "About programming in Base R",
    "section": "",
    "text": "Task 1: Basic Vector practice\n\nCreate vectors for pre and post measures\n\n\npre &lt;- c(130, 128, 116, 124, 133, 134, 118, 126, 114, 127, 141, 138, 128, 140, 137, 131, 120, 128, 139, 135)\npost &lt;- c(114, 98, 113, 99, 107, 116, 113, 111, 119, 117, 101, 119, 130, 122, 106, 106, 124, 102, 117, 113)\n\n\nAssign names\n\n\nattributes(pre)$names &lt;- paste(\"Subject\", 1:20, sep = \"_\")\nattributes(post)$names &lt;- paste(\"Subject\", 1:20, sep = \"_\")\n\nprint(pre)\n\n Subject_1  Subject_2  Subject_3  Subject_4  Subject_5  Subject_6  Subject_7 \n       130        128        116        124        133        134        118 \n Subject_8  Subject_9 Subject_10 Subject_11 Subject_12 Subject_13 Subject_14 \n       126        114        127        141        138        128        140 \nSubject_15 Subject_16 Subject_17 Subject_18 Subject_19 Subject_20 \n       137        131        120        128        139        135 \n\nprint(post)\n\n Subject_1  Subject_2  Subject_3  Subject_4  Subject_5  Subject_6  Subject_7 \n       114         98        113         99        107        116        113 \n Subject_8  Subject_9 Subject_10 Subject_11 Subject_12 Subject_13 Subject_14 \n       111        119        117        101        119        130        122 \nSubject_15 Subject_16 Subject_17 Subject_18 Subject_19 Subject_20 \n       106        106        124        102        117        113 \n\n\n\nCalculate change\n\n\nchng &lt;- post - pre\nchng\n\n Subject_1  Subject_2  Subject_3  Subject_4  Subject_5  Subject_6  Subject_7 \n       -16        -30         -3        -25        -26        -18         -5 \n Subject_8  Subject_9 Subject_10 Subject_11 Subject_12 Subject_13 Subject_14 \n       -15          5        -10        -40        -19          2        -18 \nSubject_15 Subject_16 Subject_17 Subject_18 Subject_19 Subject_20 \n       -31        -25          4        -26        -22        -22 \n\n\n\nAverage decrease in blood pressure across all patients\n\n\naverage_value &lt;- mean(chng)\naverage_value\n\n[1] -17\n\n\n\nwhich patients experienced a decrease in blood pressure after treatment\n\n\npts_decreased_pressure &lt;- which(chng&gt;0)\nattributes(pts_decreased_pressure)$names\n\n[1] \"Subject_9\"  \"Subject_13\" \"Subject_17\"\n\n\n\nSubset the vector of differences to only return those that have a positive change\n\n\npositive_chng &lt;- chng[pts_decreased_pressure]\npositive_chng\n\n Subject_9 Subject_13 Subject_17 \n         5          2          4 \n\n\n\nCalculate the average decrease in blood pressure for those where the blood pressure decreased (positive change)\n\n\naverage_positive_value &lt;- mean(positive_chng)\naverage_positive_value\n\n[1] 3.666667\n\n\n\n\nTask 2: Basic Data Frame practice\n\nCreate a data frame object with four columns corresponding to your data above:\n\n\nmy_df &lt;- data.frame(patient = paste(\"Subject\", 1:20, sep = \"_\"),\n                    pre_bp= pre,\n                    post_bp = post,\n                    diff_bp = chng)\n\n#set row names to seq numbers\nattributes(my_df)$row.names &lt;- 1:20\n\n#print \nmy_df\n\n      patient pre_bp post_bp diff_bp\n1   Subject_1    130     114     -16\n2   Subject_2    128      98     -30\n3   Subject_3    116     113      -3\n4   Subject_4    124      99     -25\n5   Subject_5    133     107     -26\n6   Subject_6    134     116     -18\n7   Subject_7    118     113      -5\n8   Subject_8    126     111     -15\n9   Subject_9    114     119       5\n10 Subject_10    127     117     -10\n11 Subject_11    141     101     -40\n12 Subject_12    138     119     -19\n13 Subject_13    128     130       2\n14 Subject_14    140     122     -18\n15 Subject_15    137     106     -31\n16 Subject_16    131     106     -25\n17 Subject_17    120     124       4\n18 Subject_18    128     102     -26\n19 Subject_19    139     117     -22\n20 Subject_20    135     113     -22\n\n\n\nReturn only rows where the diff_bp column is negative.\n\n\nmy_df[my_df$diff_bp&lt;0,]\n\n      patient pre_bp post_bp diff_bp\n1   Subject_1    130     114     -16\n2   Subject_2    128      98     -30\n3   Subject_3    116     113      -3\n4   Subject_4    124      99     -25\n5   Subject_5    133     107     -26\n6   Subject_6    134     116     -18\n7   Subject_7    118     113      -5\n8   Subject_8    126     111     -15\n10 Subject_10    127     117     -10\n11 Subject_11    141     101     -40\n12 Subject_12    138     119     -19\n14 Subject_14    140     122     -18\n15 Subject_15    137     106     -31\n16 Subject_16    131     106     -25\n18 Subject_18    128     102     -26\n19 Subject_19    139     117     -22\n20 Subject_20    135     113     -22\n\n#number of rows\ndim(my_df[my_df$diff_bp&lt;0,])[1]\n\n[1] 17\n\n# solution below I believe wouldn't give me full credit since we were supposed to use BaseR\n#my_df |&gt; \n#  subset(diff_bp &lt; 0)\n\n\nAdd a new column to the data frame corresponding to TRUE if the post_bp is less than 120.\n\n\nmy_df$postbp_ls120 &lt;- my_df$post_bp&lt;120\nmy_df\n\n      patient pre_bp post_bp diff_bp postbp_ls120\n1   Subject_1    130     114     -16         TRUE\n2   Subject_2    128      98     -30         TRUE\n3   Subject_3    116     113      -3         TRUE\n4   Subject_4    124      99     -25         TRUE\n5   Subject_5    133     107     -26         TRUE\n6   Subject_6    134     116     -18         TRUE\n7   Subject_7    118     113      -5         TRUE\n8   Subject_8    126     111     -15         TRUE\n9   Subject_9    114     119       5         TRUE\n10 Subject_10    127     117     -10         TRUE\n11 Subject_11    141     101     -40         TRUE\n12 Subject_12    138     119     -19         TRUE\n13 Subject_13    128     130       2        FALSE\n14 Subject_14    140     122     -18        FALSE\n15 Subject_15    137     106     -31         TRUE\n16 Subject_16    131     106     -25         TRUE\n17 Subject_17    120     124       4        FALSE\n18 Subject_18    128     102     -26         TRUE\n19 Subject_19    139     117     -22         TRUE\n20 Subject_20    135     113     -22         TRUE\n\n# solution below I believe wouldn't give me full credit since we were supposed to use BaseR\n#library(dplyr)\n#my_df &lt;- my_df |&gt;\n#  mutate(postbp_ls120 = post_bp&lt;120)\n\n\nprint the data frame\n\n\nknitr::kable(my_df)\n\n\n\n\npatient\npre_bp\npost_bp\ndiff_bp\npostbp_ls120\n\n\n\n\nSubject_1\n130\n114\n-16\nTRUE\n\n\nSubject_2\n128\n98\n-30\nTRUE\n\n\nSubject_3\n116\n113\n-3\nTRUE\n\n\nSubject_4\n124\n99\n-25\nTRUE\n\n\nSubject_5\n133\n107\n-26\nTRUE\n\n\nSubject_6\n134\n116\n-18\nTRUE\n\n\nSubject_7\n118\n113\n-5\nTRUE\n\n\nSubject_8\n126\n111\n-15\nTRUE\n\n\nSubject_9\n114\n119\n5\nTRUE\n\n\nSubject_10\n127\n117\n-10\nTRUE\n\n\nSubject_11\n141\n101\n-40\nTRUE\n\n\nSubject_12\n138\n119\n-19\nTRUE\n\n\nSubject_13\n128\n130\n2\nFALSE\n\n\nSubject_14\n140\n122\n-18\nFALSE\n\n\nSubject_15\n137\n106\n-31\nTRUE\n\n\nSubject_16\n131\n106\n-25\nTRUE\n\n\nSubject_17\n120\n124\n4\nFALSE\n\n\nSubject_18\n128\n102\n-26\nTRUE\n\n\nSubject_19\n139\n117\n-22\nTRUE\n\n\nSubject_20\n135\n113\n-22\nTRUE\n\n\n\n\n\n\n\nTask 3: List\n\nCreate new data frame\n\n\npret &lt;- c(138, 135, 147, 117, 152, 134, 114, 121, 131, 130)\npostt &lt;- c(105, 136, 123, 130, 134, 143, 135, 139, 120, 124)\ndiff_bp &lt;- postt - pret\npostbp_ls120 &lt;- postt&lt;120\n\n\nnew_df &lt;- data.frame(patient = paste(\"Subject\", 1:10, sep = \"_\"),\n                     pre_bp = pret,\n                     post_bp = postt,\n                     diff_bp = diff_bp,\n                     postbp_ls120 = postbp_ls120\n                     )\nnew_df\n\n      patient pre_bp post_bp diff_bp postbp_ls120\n1   Subject_1    138     105     -33         TRUE\n2   Subject_2    135     136       1        FALSE\n3   Subject_3    147     123     -24        FALSE\n4   Subject_4    117     130      13        FALSE\n5   Subject_5    152     134     -18        FALSE\n6   Subject_6    134     143       9        FALSE\n7   Subject_7    114     135      21        FALSE\n8   Subject_8    121     139      18        FALSE\n9   Subject_9    131     120     -11        FALSE\n10 Subject_10    130     124      -6        FALSE\n\n\n\nList with two elements\n\n\nmy_list &lt;- list(treatment=my_df, placebo=new_df)\nmy_list\n\n$treatment\n      patient pre_bp post_bp diff_bp postbp_ls120\n1   Subject_1    130     114     -16         TRUE\n2   Subject_2    128      98     -30         TRUE\n3   Subject_3    116     113      -3         TRUE\n4   Subject_4    124      99     -25         TRUE\n5   Subject_5    133     107     -26         TRUE\n6   Subject_6    134     116     -18         TRUE\n7   Subject_7    118     113      -5         TRUE\n8   Subject_8    126     111     -15         TRUE\n9   Subject_9    114     119       5         TRUE\n10 Subject_10    127     117     -10         TRUE\n11 Subject_11    141     101     -40         TRUE\n12 Subject_12    138     119     -19         TRUE\n13 Subject_13    128     130       2        FALSE\n14 Subject_14    140     122     -18        FALSE\n15 Subject_15    137     106     -31         TRUE\n16 Subject_16    131     106     -25         TRUE\n17 Subject_17    120     124       4        FALSE\n18 Subject_18    128     102     -26         TRUE\n19 Subject_19    139     117     -22         TRUE\n20 Subject_20    135     113     -22         TRUE\n\n$placebo\n      patient pre_bp post_bp diff_bp postbp_ls120\n1   Subject_1    138     105     -33         TRUE\n2   Subject_2    135     136       1        FALSE\n3   Subject_3    147     123     -24        FALSE\n4   Subject_4    117     130      13        FALSE\n5   Subject_5    152     134     -18        FALSE\n6   Subject_6    134     143       9        FALSE\n7   Subject_7    114     135      21        FALSE\n8   Subject_8    121     139      18        FALSE\n9   Subject_9    131     120     -11        FALSE\n10 Subject_10    130     124      -6        FALSE\n\n\n\nAccess the first list element using three different types of syntax.\n\n\n#1st\nmy_list$treatment\n\n      patient pre_bp post_bp diff_bp postbp_ls120\n1   Subject_1    130     114     -16         TRUE\n2   Subject_2    128      98     -30         TRUE\n3   Subject_3    116     113      -3         TRUE\n4   Subject_4    124      99     -25         TRUE\n5   Subject_5    133     107     -26         TRUE\n6   Subject_6    134     116     -18         TRUE\n7   Subject_7    118     113      -5         TRUE\n8   Subject_8    126     111     -15         TRUE\n9   Subject_9    114     119       5         TRUE\n10 Subject_10    127     117     -10         TRUE\n11 Subject_11    141     101     -40         TRUE\n12 Subject_12    138     119     -19         TRUE\n13 Subject_13    128     130       2        FALSE\n14 Subject_14    140     122     -18        FALSE\n15 Subject_15    137     106     -31         TRUE\n16 Subject_16    131     106     -25         TRUE\n17 Subject_17    120     124       4        FALSE\n18 Subject_18    128     102     -26         TRUE\n19 Subject_19    139     117     -22         TRUE\n20 Subject_20    135     113     -22         TRUE\n\n#2nd\nmy_list[1]\n\n$treatment\n      patient pre_bp post_bp diff_bp postbp_ls120\n1   Subject_1    130     114     -16         TRUE\n2   Subject_2    128      98     -30         TRUE\n3   Subject_3    116     113      -3         TRUE\n4   Subject_4    124      99     -25         TRUE\n5   Subject_5    133     107     -26         TRUE\n6   Subject_6    134     116     -18         TRUE\n7   Subject_7    118     113      -5         TRUE\n8   Subject_8    126     111     -15         TRUE\n9   Subject_9    114     119       5         TRUE\n10 Subject_10    127     117     -10         TRUE\n11 Subject_11    141     101     -40         TRUE\n12 Subject_12    138     119     -19         TRUE\n13 Subject_13    128     130       2        FALSE\n14 Subject_14    140     122     -18        FALSE\n15 Subject_15    137     106     -31         TRUE\n16 Subject_16    131     106     -25         TRUE\n17 Subject_17    120     124       4        FALSE\n18 Subject_18    128     102     -26         TRUE\n19 Subject_19    139     117     -22         TRUE\n20 Subject_20    135     113     -22         TRUE\n\n#3rd\nmy_list[[1]]\n\n      patient pre_bp post_bp diff_bp postbp_ls120\n1   Subject_1    130     114     -16         TRUE\n2   Subject_2    128      98     -30         TRUE\n3   Subject_3    116     113      -3         TRUE\n4   Subject_4    124      99     -25         TRUE\n5   Subject_5    133     107     -26         TRUE\n6   Subject_6    134     116     -18         TRUE\n7   Subject_7    118     113      -5         TRUE\n8   Subject_8    126     111     -15         TRUE\n9   Subject_9    114     119       5         TRUE\n10 Subject_10    127     117     -10         TRUE\n11 Subject_11    141     101     -40         TRUE\n12 Subject_12    138     119     -19         TRUE\n13 Subject_13    128     130       2        FALSE\n14 Subject_14    140     122     -18        FALSE\n15 Subject_15    137     106     -31         TRUE\n16 Subject_16    131     106     -25         TRUE\n17 Subject_17    120     124       4        FALSE\n18 Subject_18    128     102     -26         TRUE\n19 Subject_19    139     117     -22         TRUE\n20 Subject_20    135     113     -22         TRUE\n\n\n\nIn one line, access the placebo data frame, pre_bp column.\n\n\nmy_list$placebo$pre_bp\n\n [1] 138 135 147 117 152 134 114 121 131 130\n\n\n\n\nTask 4: Control Flow Practice\n\ncreate a new column in each data frame from above called status (to the data frames that are stored in my list)\n\n\nmy_list$treatment$status &lt;- character(20)\nmy_list$placebo$status &lt;- character(10)\n\nmy_list$treatment\n\n      patient pre_bp post_bp diff_bp postbp_ls120 status\n1   Subject_1    130     114     -16         TRUE       \n2   Subject_2    128      98     -30         TRUE       \n3   Subject_3    116     113      -3         TRUE       \n4   Subject_4    124      99     -25         TRUE       \n5   Subject_5    133     107     -26         TRUE       \n6   Subject_6    134     116     -18         TRUE       \n7   Subject_7    118     113      -5         TRUE       \n8   Subject_8    126     111     -15         TRUE       \n9   Subject_9    114     119       5         TRUE       \n10 Subject_10    127     117     -10         TRUE       \n11 Subject_11    141     101     -40         TRUE       \n12 Subject_12    138     119     -19         TRUE       \n13 Subject_13    128     130       2        FALSE       \n14 Subject_14    140     122     -18        FALSE       \n15 Subject_15    137     106     -31         TRUE       \n16 Subject_16    131     106     -25         TRUE       \n17 Subject_17    120     124       4        FALSE       \n18 Subject_18    128     102     -26         TRUE       \n19 Subject_19    139     117     -22         TRUE       \n20 Subject_20    135     113     -22         TRUE       \n\nmy_list$placebo\n\n      patient pre_bp post_bp diff_bp postbp_ls120 status\n1   Subject_1    138     105     -33         TRUE       \n2   Subject_2    135     136       1        FALSE       \n3   Subject_3    147     123     -24        FALSE       \n4   Subject_4    117     130      13        FALSE       \n5   Subject_5    152     134     -18        FALSE       \n6   Subject_6    134     143       9        FALSE       \n7   Subject_7    114     135      21        FALSE       \n8   Subject_8    121     139      18        FALSE       \n9   Subject_9    131     120     -11        FALSE       \n10 Subject_10    130     124      -6        FALSE       \n\n\n\nFor the non-placebo data frame (within the list), create a for loop and use if/then/else logic to create the status columnâ€™s values.\n\n\nfor (i in 1:dim(my_list$treatment)[1]){\n  \n  if ( my_list$treatment$post_bp[[i]] &lt;= 120 ){\n    my_list$treatment$status[[i]] &lt;- \"optimal\"\n  } else if (my_list$treatment$post_bp[[i]] &lt;= 130 ){\n    my_list$treatment$status[[i]] &lt;- \"borderline\"\n  } else if (my_list$treatment$post_bp[[i]] &gt; 130 ){\n    my_list$treatment$status[[i]] &lt;- \"high\"\n  } else {\n    \"ERROR\"\n  }\n}\n\nmy_list$treatment\n\n      patient pre_bp post_bp diff_bp postbp_ls120     status\n1   Subject_1    130     114     -16         TRUE    optimal\n2   Subject_2    128      98     -30         TRUE    optimal\n3   Subject_3    116     113      -3         TRUE    optimal\n4   Subject_4    124      99     -25         TRUE    optimal\n5   Subject_5    133     107     -26         TRUE    optimal\n6   Subject_6    134     116     -18         TRUE    optimal\n7   Subject_7    118     113      -5         TRUE    optimal\n8   Subject_8    126     111     -15         TRUE    optimal\n9   Subject_9    114     119       5         TRUE    optimal\n10 Subject_10    127     117     -10         TRUE    optimal\n11 Subject_11    141     101     -40         TRUE    optimal\n12 Subject_12    138     119     -19         TRUE    optimal\n13 Subject_13    128     130       2        FALSE borderline\n14 Subject_14    140     122     -18        FALSE borderline\n15 Subject_15    137     106     -31         TRUE    optimal\n16 Subject_16    131     106     -25         TRUE    optimal\n17 Subject_17    120     124       4        FALSE borderline\n18 Subject_18    128     102     -26         TRUE    optimal\n19 Subject_19    139     117     -22         TRUE    optimal\n20 Subject_20    135     113     -22         TRUE    optimal\n\n\n\nRepeat for the placebo data frame (within the list).\n\n\nfor (i in 1:dim(my_list$placebo)[1]){\n  \n  if ( my_list$placebo$post_bp[[i]] &lt;= 120 ){\n    my_list$placebo$status[[i]] &lt;- \"optimal\"\n  } else if (my_list$placebo$post_bp[[i]] &lt;= 130 ){\n    my_list$placebo$status[[i]] &lt;- \"borderline\"\n  } else if (my_list$placebo$post_bp[[i]] &gt; 130 ){\n    my_list$placebo$status[[i]] &lt;- \"high\"\n  } else {\n    \"ERROR\"\n  }\n}\n\nmy_list$placebo\n\n      patient pre_bp post_bp diff_bp postbp_ls120     status\n1   Subject_1    138     105     -33         TRUE    optimal\n2   Subject_2    135     136       1        FALSE       high\n3   Subject_3    147     123     -24        FALSE borderline\n4   Subject_4    117     130      13        FALSE borderline\n5   Subject_5    152     134     -18        FALSE       high\n6   Subject_6    134     143       9        FALSE       high\n7   Subject_7    114     135      21        FALSE       high\n8   Subject_8    121     139      18        FALSE       high\n9   Subject_9    131     120     -11        FALSE    optimal\n10 Subject_10    130     124      -6        FALSE borderline\n\n\n\n\nTask 5: Function Writing\n\nmy_function &lt;- function(treatment, \n                        placebo, \n                        stat=\"mean\"){\n  #check if proper columns are numeric\n  if(!is.numeric(treatment$pre_bp) | \n     !is.numeric(treatment$post_bp) |\n     !is.numeric(treatment$diff_bp) |\n     !is.numeric(placebo$pre_bp) |\n     !is.numeric(placebo$post_bp) |\n     !is.numeric(placebo$diff_bp)\n     ){\n    stop(\"Input data format error\")\n  } \n  \n  #get needed function\n  my_fun &lt;- get(stat)\n  \n  #Finds the statistic of interest for both dfs and all columns\n  a &lt;- my_fun(my_list$treatment$pre_bp)\n  b &lt;- my_fun(my_list$treatment$post_bp)\n  c &lt;- my_fun(my_list$treatment$diff_bp)\n  d &lt;- my_fun(my_list$placebo$pre_bp)\n  e &lt;- my_fun(my_list$placebo$post_bp)\n  f &lt;- my_fun(my_list$placebo$diff_bp)\n  \n  #save everything as a list\n  x &lt;- list(a,b,c,d,e,f)\n  #add names to the list elements\n  attributes(x)$names &lt;- paste(stat, \n                               c(rep(\"trt\",3), rep(\"plc\",3)),\n                               rep(c(\"pre\",\"post\",\"diff\"),2), \n                               sep = \"_\")\n  \n  #return list\n  return(x)\n}\n\nmy_function(my_list$treatment, my_list$placebo)\n\n$mean_trt_pre\n[1] 129.35\n\n$mean_trt_post\n[1] 112.35\n\n$mean_trt_diff\n[1] -17\n\n$mean_plc_pre\n[1] 131.9\n\n$mean_plc_post\n[1] 128.9\n\n$mean_plc_diff\n[1] -3\n\nmy_function(my_list$treatment, my_list$placebo, stat=\"var\")\n\n$var_trt_pre\n[1] 64.55526\n\n$var_trt_post\n[1] 74.76579\n\n$var_trt_diff\n[1] 153.6842\n\n$var_plc_pre\n[1] 149.8778\n\n$var_plc_post\n[1] 124.9889\n\n$var_plc_diff\n[1] 341.3333\n\nmy_function(my_list$treatment, my_list$placebo, stat=\"max\")\n\n$max_trt_pre\n[1] 141\n\n$max_trt_post\n[1] 130\n\n$max_trt_diff\n[1] 5\n\n$max_plc_pre\n[1] 152\n\n$max_plc_post\n[1] 143\n\n$max_plc_diff\n[1] 21\n\nmy_function(my_list$treatment, my_list$placebo, stat=\"min\")\n\n$min_trt_pre\n[1] 114\n\n$min_trt_post\n[1] 98\n\n$min_trt_diff\n[1] -40\n\n$min_plc_pre\n[1] 114\n\n$min_plc_post\n[1] 105\n\n$min_plc_diff\n[1] -33\n\nmy_function(my_list$treatment, my_list$placebo, stat=\"sd\")\n\n$sd_trt_pre\n[1] 8.034629\n\n$sd_trt_post\n[1] 8.646721\n\n$sd_trt_diff\n[1] 12.39694\n\n$sd_plc_pre\n[1] 12.24246\n\n$sd_plc_post\n[1] 11.17984\n\n$sd_plc_diff\n[1] 18.47521"
  }
]